
	<link rel="stylesheet" href="https://www.notion.so/app-21eb0c05ca983c393d67.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script></head>
<div id="explorerForm">
     <div class="elementor-row">
         
          <ol id="directions">

        <li><strong>Paste in the New Explorer Data Studio Report URL: (required) <br> <span style="font-size: 0.75em">example:
                    https://datastudio.google.com/u/0/reporting/xxxxxx-31cb-4xxxx-9acf-xxxxxxxx4847/page/q8oSC/edit</span></strong>
                <input id="report" tabindex="1" type="text" style="width: 100%; line-height: 2em; padding: 0.5em 0.5 em 0.25em" /></p></li>
                        <li><strong>Hit the 'Tab' key</strong></li></ol></div>

    <div class="elementor-row">
          <div class="elementor-column elementor-col-100"  data-element_type="column">

    <p><button class="select" type="button" tabindex="4" style="margin-bottom: 1em">Copy Root Code</button> <textarea
            id="root" class="select hiddenTextarea" readonly="readonly"  rows="1" >	</textarea></p></div>
                      <div class="elementor-column elementor-col-100"  data-element_type="column">
 
    <p><button class="select" type="button" tabindex="5" style="margin-bottom: 1em">Copy Trending Code</button> <textarea
            id="trending" class="select hiddenTextarea" readonly="readonly" rows="1"  >	</textarea></p></div>
            
            <div class="elementor-column elementor-col-100"  data-element_type="column">
    
    <p><button class="select" type="button" tabindex="5" style="margin-bottom: 1em">Copy Trending Pages Code</button> <textarea
            id="pageexplorer" class="select hiddenTextarea" readonly="readonly" rows="1" >	</textarea></p></div></div>
            

              <div class="elementor-row">           <div class="elementor-column elementor-col-100"  data-element_type="column"> 
     <p><button class="select" type="button" tabindex="8" style="margin-bottom: 1em">Copy Check Serps Code</button> <textarea
            id="checkSerps" class="select hiddenTextarea" readonly="readonly" rows="1">HYPERLINK(CONCAT("https://google.com/search?q=",REGEXP_REPLACE(query,' ','+')),"ðŸ”ŽSERPS")</textarea></p>

</div>
<div class="elementor-column elementor-col-100"  data-element_type="column">
      
       
     <p><button class="select" type="button" tabindex="10" style="margin-bottom: 1em">Copy Image Serps Code</button> <textarea
            id="checkQuora" class="select hiddenTextarea" readonly="readonly" rows="1" >HYPERLINK(CONCAT("https://google.com/search?q=",REGEXP_REPLACE(Query,' ','+'),"&tbm=isch"),"ðŸ”ŽImages")</textarea></p>
       </div>

      <div class="elementor-column elementor-col-100"  data-element_type="column">   
     <p><button class="select" type="button" tabindex="10" style="margin-bottom: 1em">Copy Quora Code</button> <textarea
            id="checkQuora" class="select hiddenTextarea" readonly="readonly" rows="1" >HYPERLINK(CONCAT("https://www.quora.com/search?q=",REGEXP_REPLACE(query,' ','%20')),IMAGE("https://upload.wikimedia.org/wikipedia/commons/2/2c/Quora_icon.png","Q"))</textarea></p>

</div> 

<div class="elementor-column elementor-col-100"  data-element_type="column">   
     <p><button class="select" type="button" tabindex="9" style="margin-bottom: 1em">Copy Reddit Code</button> <textarea
            id="checkReddit" class="select hiddenTextarea" readonly="readonly"  rows="1">HYPERLINK(CONCAT("https://www.reddit.com/search/?q=",REGEXP_REPLACE(query,' ','%20')),IMAGE("https://external-preview.redd.it/iDdntscPf-nfWKqzHRGFmhVxZm4hZgaKe5oyFws-yzA.png?auto=webp&s=38648ef0dc2c3fce76d5e1d8639234d8da0152b2","Q"))</textarea></p>

</div>

</div>

  


    <style>
        .hidden {
            display: none;
        }
        .elementor-column.elementor-col-100,.elementor-column.elementor-col-50 {padding: 5px 5px 5px 40px!important;display: flex;float: left !important}
	    .elementor-row {width: 100%; display: block; float: left !important}

         .elementor-column.elementor-col-100 p button {width: 100%;clear: both;}

	    .elementor-column button {
  border-style: solid;
  border-top-width: 0;
  border-right-width: 0;
  border-left-width: 0;
  border-bottom-width: 0;
  color: #000;
  border-color: #d39078;
  background-color: #d39078;
  border-radius: 7px;
  padding-top: 14px;
  padding-right: 40px;
  padding-bottom: 14px;
  padding-left: 40px;
  font-family: inherit;
  font-weight: 600;
  line-height: 1;
  text-transform: lowercase;
}
    </style>

    <script>
        jQuery(function ($) {

            $("button.select").click(function () {

                $(this).closest('p').find('textarea').select();
                document.execCommand('copy');
                $(this).html("copied!");
            });

            function update() {

                var reportUrl = $("#report").val() ? $("#report").val().trim() : '';

                var reportId = reportUrl.split('reporting/')[1].split('/page/')[0];
                console.log(reportId);

                var rootLink =
                    `HYPERLINK(CONCAT('https://datastudio.google.com/reporting/${reportId}/page/d6pSC?params=%7B"df845":"include%25EE%2580%25800%25EE%2580%2580PT%25EE%2580%2580',root_term,'"%7D'),root_term)`;
                console.log(rootLink);

                var trendingLink =
                    `HYPERLINK(CONCAT('https://datastudio.google.com/reporting/${reportId}/page/d6pSC?params=%7B"df845":"include%25EE%2580%25800%25EE%2580%2580EQ%25EE%2580%2580',query ,'"%7D'),query)`;
                console.log(trendingLink);
                var pageExplorerLink = `HYPERLINK(CONCAT('https://datastudio.google.com/reporting/${reportId}/page/p_g7lfzjqrrc?params=%7B"df336":"include%25EE%2580%25800%25EE%2580%2580EQ%25EE%2580%2580',Page ,'"%7D'),'Explore the selected Page in Page Explorer')`;

                var gmbIn = $('#gmbField').val() ? $('#gmbField').val().trim() : '';
                var brandIn = $('#brandField').val() ? $('#brandField').val().trim().toLowerCase() : '';
if (gmbIn===''){}
else{
                var gmbArrIn = gmbIn.indexOf('::') ? gmbIn.split('::') : gmbIn;
                if (gmbArrIn === gmbIn) {
                    var gmbArr = [];
                    gmbArr.push(gmbArrIn)
                    console.log("gmbArr inside check for gmbArrIn === gmbIn: ", gmbArr)
                } else {
                    var gmbArr = [...gmbArrIn];
                    console.log("gmbArr inside else", gmbArr)
                }
                console.log("gmbArr length: ", gmbArr.length);
                if (gmbArr.length === 1) {

                    var gmbPattern = `Case`;

                    var row = gmbArr[0];

                    var prop = row.split('=')[0];
                    var valuesIn = row.split('=')[1];
                    console.log("row: ", row)
                    console.log("Property: ", prop);
                    console.log("valuesIn: ", valuesIn);


                    var valuesMid = valuesIn.indexOf('|') > -1 ? valuesIn.split('|') : valuesIn;


                    if (valuesMid === valuesIn) {
                        var values = [];
                        values.push(valuesIn)


                        console.log("values inside check for valuesIn === gmbIn: ", values)
                    } else {
                        var values = [...valuesMid];
                        console.log("values inside else", values)
                    }


                    if (values.length > 1) {
                        for (var j = 0; j < values.length; j++) {
                            var item = values[j];
                            gmbPattern += `
	   	WHEN REGEXP_MATCH(Page, '((?i).*${prop}=${item}).*') THEN "GMB"`;
                        }
                    } else {
                        gmbPattern += `
        WHEN REGEXP_MATCH(Page, '((?i).*${prop}=${values[0]}).*') THEN "GMB"`;
                    }




                } else {

                    var gmbPattern = `Case`;
                    for (var i = 0; i < gmbArr.length; i++) {
                        var row = gmbArr[i];
                        var prop = row.split('=')[0];
                        var valuesIn = row.split('=')[1];
                        console.log("row: ", row)
                        console.log("Property: ", prop);
                        console.log("valuesIn: ", valuesIn);


                        var valuesMid = valuesIn.indexOf('|') > -1 ? valuesIn.split('|') : valuesIn;


                        if (valuesMid === valuesIn) {
                            var values = [];
                            values.push(valuesIn)


                            console.log("values inside check for valuesIn === gmbIn: ", values)
                        } else {
                            var values = [...valuesMid];
                            console.log("values inside else", values)
                        }


                        if (values.length > 1) {
                            for (var j = 0; j < values.length; j++) {
                                var item = values[j];
                                gmbPattern += `
	   	WHEN REGEXP_MATCH(Page, '((?i).*${prop}=${item}).*') THEN "GMB"`;
                            }
                        } else {
                            gmbPattern += `
        WHEN REGEXP_MATCH(Page, '((?i).*${prop}=${values[0]}).*') THEN "GMB"`;
                        }

                       


                    }
                }
                 gmbPattern += `
ELSE "Not GMB"
END`;}
                var brandPattern = `Case`;
                brandPattern += `
        WHEN REGEXP_MATCH(query, '.*${brandIn}.*') THEN "Brand"`;

                brandPattern += `
ELSE "Not Brand"
END`;

                console.log(brandPattern);

                $('textarea#root').text(rootLink);

                $('textarea#trending').text(trendingLink);
$('textarea#pageexplorer').text(pageExplorerLink);

                $('textarea#gmb').text(gmbPattern);
                $('textarea#brand').text(brandPattern);

            };
            $("input").on("change", function () {

                update();

            });

        });
    </script>
    </div>
    <style>.hiddenTextarea {
  position: absolute;
  opacity: .01;
  height: 0;
  overflow: hidden;
}</style>

